version: '2'

services:
  web1:
    ports:
      - "{WEB_SERVER_PORT}:80"
    extra_hosts:
      - "docker.local:127.0.0.1"
      - "{PROJECT_HOST_NAME}:127.0.0.1"
    labels:
      - traefik.http.routers.{PROJECT_NAME}.rule=Host(`{PROJECT_HOST_NAME}`)
      - traefik.http.routers.{PROJECT_NAME}.entrypoints=web
      - traefik.enable=true
      - traefik.docker.network=traefikv2_default
    networks:
      - default
      - traefikv2_default
  mysql:
    ports:
      - "{DB_SERVER_PORT}:3306"
networks:
  default:
    driver: bridge
  traefikv2_default:
    external: true
